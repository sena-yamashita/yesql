# ToDo

## 完了した作業 (2025-01-27)

### GitHub CI修正
- [x] PostgreSQL、MySQL、MSSQLのDockerサービスをGitHub Actionsに追加
- [x] テストヘルパーに環境変数ベースのデータベース接続設定を追加
- [x] CI環境でのテスト実行のためのskipタグを削除
- [x] SQLファイルから`-- name:`行を削除（Yesqlトークナイザーとの競合を解決）
- [x] テストモジュールの構文エラーを修正
- [x] 関数名の不一致を修正（ファイル名ベースの自動生成に対応）
- [x] `@tag`を`@moduletag`に変更（ExUnitの警告を解消）

### 主な変更点
1. **SQLファイルの修正**
   - すべてのSQLファイルから`-- name:`メタデータ行を削除
   - 複数クエリを含むファイルを単一クエリに縮小

2. **テストファイルの修正**
   - `defquery`を`Yesql.defquery`に変更
   - データベースドライバーのquery関数呼び出しから不要な空配列パラメータを削除
   - テスト関数名をファイル名ベースの命名規則に合わせて修正

3. **CI設定の改善**
   - `.github/workflows/elixir.yml`にDockerサービスを追加
   - 環境変数ベースのデータベース接続設定

## 今後の作業

### 高優先度
- [ ] PostgreSQL Yesqlテストの完全な実装（現在無効化中）
- [ ] Real World Castテストの完全な実装（現在無効化中）
- [ ] 複数クエリを含むSQLファイルのサポート検討

### 中優先度
- [ ] ストリーミング機能のより包括的なテスト
- [ ] パフォーマンステストの追加
- [ ] エラーハンドリングの改善

### 低優先度
- [ ] ドキュメントの更新
- [ ] サンプルコードの追加
- [ ] ベンチマークテストの実装

## 注意事項
- 現在の実装では、1つのSQLファイルに1つのクエリのみ含めることができます
- 関数名はSQLファイル名から自動生成されます（例：`simple_test.sql` → `simple_test/2`）
- PostgreSQLとDuckDBの`::`キャスト構文は正しくサポートされています